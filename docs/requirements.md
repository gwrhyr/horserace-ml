# 要件ヒアリング
1. 「確率」をどう定義したいか？
出力したい項目に「一着確率」などがあるけど、これは以下のどちらのイメージに近いかな？  
パターンA（絶対評価）: その馬が過去のデータ照らし合わせて「勝つ能力が何%あるか」を算出する（全馬の合計が100%になるとは限らない）。  
パターンB（相対評価）: そのレースに出る他の馬と比較して、相対的に誰が一番強いかの確率を出す（全馬の合計が100%になる）。  
※LightGBMの lambdarank を使うなら、パターンBの方が相性がいいぜ。  
→ パターンAとBを複合して算出したい。通時的な分析と共時的な分析はどちらも必要です。  
→ 出力結果としてはパターンBの方が近い  

2. 予測に使うデータの「期間」や「範囲」は？
JRAのデータは膨大だけど、どこまで遡る予定かな？  
例：過去10年分の全レースを使う / 直近3年分に絞る。  
新馬戦や障害レースも含めるか、平地競走のみに絞るか。  
→ 直近5年分に絞る。テストデータはランダムではなく、時系列的にどのデータをテストデータとするか判断したい。  
→ また、学習データとテストデータをある日を境に2分割するのではなく、チェックポイント兼テストデータとなるようなレースをいくつも等間隔(3ヶ月)で作成し、チェックポイント以前のデータを学習データとすることで学習の精度を上げたいが可能か？  
→ テストデータは20%になるように調整したい  
→ テストデータからは新馬戦は除外したい。学習データには含めてよい。  
→ 障害レースはテストデータからも学習データからも除外する。  

3.「不確実性」をどう表現したいか？
前回のCSVサンプルにあった「uncertainty」についてだ。これは今回も必要かな？  
例えば「初出走の馬だからデータがなくて予測がアテにならない」とか「休み明けで状態が不明」といった要素をどう扱いたいか。  
→ 今回は不確実性はなくてよい  

4. 最終的なアウトプットの利用シーンは？
自分のPCで計算して、コンソール（ターミナル）やCSVで結果が見れればOK？  
それとも、marimoで綺麗なグラフ（どの要素が効いてその確率になったか）まで表示したい？  
→ marimoでグラフを表示したい  

5. データの更新頻度は？
週末のレース直前に最新のオッズや馬体重を取り込んで反映させたいか。  
それとも、前日までの確定データだけで予測を完結させたいか。  
→ 5分前以前で最短のオッズを学習データとして組込みたい。つまり、本番の入力情報としてもオッズ情報が必要。  
→ 最新の馬体重情報は取り込みたい。  

